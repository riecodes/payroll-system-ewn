-- SSS Contribution Database Structure
-- This creates the tables needed to store SSS contribution schedule data

-- Main table for SSS contribution schedule
CREATE TABLE `sss_contribution_schedule` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `min_compensation` decimal(10,2) NOT NULL DEFAULT 0.00,
  `max_compensation` decimal(10,2) NOT NULL DEFAULT 0.00,
  `regular_ss_employer` decimal(10,2) NOT NULL DEFAULT 0.00,
  `mpf_employer` decimal(10,2) NOT NULL DEFAULT 0.00,
  `ec_employer` decimal(10,2) NOT NULL DEFAULT 0.00,
  `regular_ss_employee` decimal(10,2) NOT NULL DEFAULT 0.00,
  `mpf_employee` decimal(10,2) NOT NULL DEFAULT 0.00,
  `active` enum('yes','no') NOT NULL DEFAULT 'yes',
  `created_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_compensation_range` (`min_compensation`, `max_compensation`),
  KEY `idx_active` (`active`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Insert the current SSS contribution data
INSERT INTO `sss_contribution_schedule` 
(`min_compensation`, `max_compensation`, `regular_ss_employer`, `mpf_employer`, `ec_employer`, `regular_ss_employee`, `mpf_employee`) VALUES
(0.00, 5249.99, 500.00, 0.00, 10.00, 250.00, 0.00),
(5250.00, 5749.99, 550.00, 0.00, 10.00, 275.00, 0.00),
(5750.00, 6249.99, 600.00, 0.00, 10.00, 300.00, 0.00),
(6250.00, 6749.99, 650.00, 0.00, 10.00, 325.00, 0.00),
(6750.00, 7249.99, 700.00, 0.00, 10.00, 350.00, 0.00),
(7250.00, 7749.99, 750.00, 0.00, 10.00, 375.00, 0.00),
(7750.00, 8249.99, 800.00, 0.00, 10.00, 400.00, 0.00),
(8250.00, 8749.99, 850.00, 0.00, 10.00, 425.00, 0.00),
(8750.00, 9249.99, 900.00, 0.00, 10.00, 450.00, 0.00),
(9250.00, 9749.99, 950.00, 0.00, 10.00, 475.00, 0.00),
(9750.00, 10249.99, 1000.00, 0.00, 10.00, 500.00, 0.00),
(10250.00, 10749.99, 1050.00, 0.00, 10.00, 525.00, 0.00),
(10750.00, 11249.99, 1100.00, 0.00, 10.00, 550.00, 0.00),
(11250.00, 11749.99, 1150.00, 0.00, 10.00, 575.00, 0.00),
(11750.00, 12249.99, 1200.00, 0.00, 10.00, 600.00, 0.00),
(12250.00, 12749.99, 1250.00, 0.00, 10.00, 625.00, 0.00),
(12750.00, 13249.99, 1300.00, 0.00, 10.00, 650.00, 0.00),
(13250.00, 13749.99, 1350.00, 0.00, 10.00, 675.00, 0.00),
(13750.00, 14249.99, 1400.00, 0.00, 10.00, 700.00, 0.00),
(14250.00, 14749.99, 1450.00, 0.00, 10.00, 725.00, 0.00),
(14750.00, 15249.99, 1500.00, 0.00, 30.00, 750.00, 0.00),
(15250.00, 15749.99, 1550.00, 0.00, 30.00, 775.00, 0.00),
(15750.00, 16249.99, 1600.00, 0.00, 30.00, 800.00, 0.00),
(16250.00, 16749.99, 1650.00, 0.00, 30.00, 825.00, 0.00),
(16750.00, 17249.99, 1700.00, 0.00, 30.00, 850.00, 0.00),
(17250.00, 17749.99, 1750.00, 0.00, 30.00, 875.00, 0.00),
(17750.00, 18249.99, 1800.00, 0.00, 30.00, 900.00, 0.00),
(18250.00, 18749.99, 1850.00, 0.00, 30.00, 925.00, 0.00),
(18750.00, 19249.99, 1900.00, 0.00, 30.00, 950.00, 0.00),
(19250.00, 19749.99, 1950.00, 0.00, 30.00, 975.00, 0.00),
(19750.00, 20249.99, 2000.00, 0.00, 30.00, 1000.00, 0.00),
(20250.00, 20749.99, 2000.00, 50.00, 30.00, 1000.00, 25.00),
(20750.00, 21249.99, 2000.00, 100.00, 30.00, 1000.00, 50.00),
(21250.00, 21749.99, 2000.00, 150.00, 30.00, 1000.00, 75.00),
(21750.00, 22249.99, 2000.00, 200.00, 30.00, 1000.00, 100.00),
(22250.00, 22749.99, 2000.00, 250.00, 30.00, 1000.00, 125.00),
(22750.00, 23249.99, 2000.00, 300.00, 30.00, 1000.00, 150.00),
(23250.00, 23749.99, 2000.00, 350.00, 30.00, 1000.00, 175.00),
(23750.00, 24249.99, 2000.00, 400.00, 30.00, 1000.00, 200.00),
(24250.00, 24749.99, 2000.00, 450.00, 30.00, 1000.00, 225.00),
(24750.00, 25249.99, 2000.00, 500.00, 30.00, 1000.00, 250.00),
(25250.00, 25749.99, 2000.00, 550.00, 30.00, 1000.00, 275.00),
(25750.00, 26249.99, 2000.00, 600.00, 30.00, 1000.00, 300.00),
(26250.00, 26749.99, 2000.00, 650.00, 30.00, 1000.00, 325.00),
(26750.00, 27249.99, 2000.00, 700.00, 30.00, 1000.00, 350.00),
(27250.00, 27749.99, 2000.00, 750.00, 30.00, 1000.00, 375.00),
(27750.00, 28249.99, 2000.00, 800.00, 30.00, 1000.00, 400.00),
(28250.00, 28749.99, 2000.00, 850.00, 30.00, 1000.00, 425.00),
(28750.00, 29249.99, 2000.00, 900.00, 30.00, 1000.00, 450.00),
(29250.00, 29749.99, 2000.00, 950.00, 30.00, 1000.00, 475.00),
(29750.00, 30249.99, 2000.00, 1000.00, 30.00, 1000.00, 500.00),
(30250.00, 30749.99, 2000.00, 1050.00, 30.00, 1000.00, 525.00),
(30750.00, 31249.99, 2000.00, 1100.00, 30.00, 1000.00, 550.00),
(31250.00, 31749.99, 2000.00, 1150.00, 30.00, 1000.00, 575.00),
(31750.00, 32249.99, 2000.00, 1200.00, 30.00, 1000.00, 600.00),
(32250.00, 32749.99, 2000.00, 1250.00, 30.00, 1000.00, 625.00),
(32750.00, 33249.99, 2000.00, 1300.00, 30.00, 1000.00, 650.00),
(33250.00, 33749.99, 2000.00, 1350.00, 30.00, 1000.00, 675.00),
(33750.00, 34249.99, 2000.00, 1400.00, 30.00, 1000.00, 700.00),
(34250.00, 34749.99, 2000.00, 1450.00, 30.00, 1000.00, 725.00),
(34750.00, 999999.99, 2000.00, 1500.00, 30.00, 1000.00, 750.00);

-- Optional: Create a view for easier querying
CREATE VIEW `sss_contribution_view` AS
SELECT 
    id,
    min_compensation,
    max_compensation,
    regular_ss_employer,
    mpf_employer,
    ec_employer,
    (regular_ss_employer + mpf_employer + ec_employer) as employer_total,
    regular_ss_employee,
    mpf_employee,
    (regular_ss_employee + mpf_employee) as employee_total,
    (regular_ss_employer + mpf_employer + ec_employer + regular_ss_employee + mpf_employee) as grand_total,
    active,
    created_on,
    updated_on
FROM sss_contribution_schedule
WHERE active = 'yes'
ORDER BY min_compensation ASC;
